<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>حاسبة الأجهزة – بطاقة كفاءة الطاقة</title>
  
  <style>
    :root{ --mew-primary:#0aa4b5; --mew-accent:#123e7a; --mew-bg:#f4fbfc; --card:#fff; --text:#0f172a; --muted:#5b6b7b; --radius:18px; --shadow:0 10px 30px rgba(8,56,84,.07); --shadow-soft:0 8px 20px rgba(8,56,84,.06) }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--mew-bg);color:var(--text);font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Noto Kufi Arabic","Noto Sans Arabic",Tahoma,Arial,sans-serif}
    a{color:var(--mew-accent);text-decoration:none}
    header{position:sticky;top:0;z-index:30;background:linear-gradient(90deg,var(--mew-primary),var(--mew-accent));color:#fff;box-shadow:var(--shadow)}
    .container{max-width:1120px;margin:auto;padding:16px}
    .topbar{display:flex;align-items:center;gap:12px}
    .logo{width:44px;height:44px;border-radius:12px;background:#fff;display:grid;place-items:center}
    .logo svg{width:28px;height:28px;fill:var(--mew-primary)}
    .title{font-weight:800;font-size:20px}
    nav{margin-top:10px;display:flex;flex-wrap:wrap;gap:8px}
    .pill{background:rgba(255,255,255,.14);border:1px solid rgba(255,255,255,.25);padding:10px 14px;border-radius:999px;color:var(--text);cursor:pointer}
    .pill:hover{background:rgba(255,255,255,.22)}
    main{padding:26px 0}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:18px}
    @media(max-width:900px){.grid{grid-template-columns:1fr}}
    .card{background:var(--card);border-radius:var(--radius);padding:16px;border:1px solid #e8f0f3;box-shadow:var(--shadow-soft)}
    .card h2{margin:0 0 12px;font-size:22px}
    .field{display:grid;gap:6px;margin-bottom:12px}
    .field label{font-weight:700}
    .field input{padding:12px 12px;border:1px solid #d7e3e9;border-radius:12px;font-size:15px}
    .row{display:flex;gap:10px;flex-wrap:wrap}
    .btn{display:inline-flex;gap:8px;align-items:center;justify-content:center;padding:12px 16px;border-radius:14px;border:1px solid #e9f3f6;background:#fff;color:var(--mew-accent);box-shadow:var(--shadow-soft);cursor:pointer;font-weight:800}
    .result{display:grid;gap:10px}
    .badge{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:999px;border:1px solid #e8eef2;background:#f7fbfd;font-weight:800}
    .rating{font-size:46px;font-weight:900;letter-spacing:1px}
    .rating.good{color:#059669}.rating.mid{color:#d97706}.rating.bad{color:#dc2626}
    .ratingbar{position:relative;margin-top:10px;border-radius:14px;overflow:visible;border:1px solid #e0ebf0;background:#fff;padding:0}
    .ratingbar img.bar{display:block;width:100%;height:auto}
    .ship-pointer{position:absolute;left:100%;transform:translateX(6px) translateY(-50%);width:42px;height:42px;display:grid;place-items:center;pointer-events:none}
    .ship-line{position:absolute;left:100%;width:6px;height:2px;background:#0aa4b5;transform:translateY(-50%);}
    .ship-pointer svg{width:38px;height:38px;filter:drop-shadow(0 2px 4px rgba(0,0,0,.15))}
    .ship-note{margin-top:6px;font-size:12px;color:#6b7f90}
    footer{margin:36px 0 24px;color:#8091a2;font-size:13px;text-align:center}
  </style>

</head>
<body>
  
  <header>
    <div class="container">
      <div class="topbar">
        <div class="logo" aria-label="شعار">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 2l7 4v6c0 5-3.5 9.5-7 10-3.5-.5-7-5-7-10V6l7-4zm0 4l-4 2.3v3.6c0 3.5 2.3 7 4 7s4-3.5 4-7V8.3L12 6z"/></svg>
        </div>
        <div class="title">بطاقة كفاءة الطاقة للمباني – إدارة الطاقة المتجددة و كفاءة الطاقة</div>
      </div>
      <nav>
        <a class="pill" href="index.html">ما هي البطاقة؟</a>
        <a class="pill" href="buildings-calculator.html">حاسبة المباني</a>
        <a class="pill" href="#" style="background:#fff;color:var(--mew-accent);border-color:#fff">حاسبة الأجهزة</a>
        <a class="pill" href="faq.html">الأسئلة الشائعة</a>
      </nav>
    </div>
  </header>

  
<main class="container">
  <div class="grid">
    <section class="card">
      <h2>بيانات الجهاز</h2>
      
      <div class="field">
        <label for="device_type">نوع الجهاز</label>
        <select id="device_type" style="padding:12px;border:1px solid #d7e3e9;border-radius:12px;font-size:15px">
          <option value="wash">غسالة</option>
          <option value="ac">تكييف</option>
          <option value="microwave">مايكرويف</option>
          <option value="fridge">ثلاجة</option>
          <option value="water_heater">سخان ماء</option>
          <option value="tv">تلفزيون</option>
          
        </select>
      </div>
<div class="field"><label for="old_kwh">قدرة الجهاز القديم (kW) )</label><input id="old_kwh" type="text" placeholder="مثال: 2.5"/></div>
      <div class="field"><label for="new_kwh">قدرة الجهاز الجديد (kW)</label><input id="new_kwh" type="text" placeholder="مثال: 1.8"/></div>
      <div class="field"><label for="price_diff">فرق السعر (د.ك)عند الشراء (اختياري) – د.ك</label><input id="price_diff" type="text" placeholder="مثال: 35"/></div>
      <div class="row"><button class="btn" id="calc">احسب التوفير</button><button class="btn" id="reset">إعادة تعيين</button></div>
      <p class="muted">سعر الكهرباء للمستهلك السكني في الكويت: <b>فلسان/ك.و.س</b> (0.002 دينار).</p>
    </section>

    <section class="card">
      <h2>النتائج</h2>
      <div class="result">
        <div class="badge">التوفير السنوي في الاستهلاك (kWh): <span id="kwh_save" lang="en" style="direction:ltr;unicode-bidi:embed" style="font-weight:900;margin-inline-start:8px">—</span> kWh/سنة</div>
        <div class="badge">التوفير السنوي في الفاتورة (د.ك): <span id="kwd_save_y" style="font-weight:900;margin-inline-start:8px">—</span> د.ك/سنة</div>
        <table>
          <tr><th>الفترة</th><th>التوفير الكهربائي (kWh)</th><th>التوفير المالي (د.ك)</th></tr>
          <tr><td>٥ سنوات</td><td id="kwh_5" lang="en" style="direction:ltr;unicode-bidi:embed">—</td><td id="kwd_5" lang="en" style="direction:ltr;unicode-bidi:embed">—</td></tr>
          <tr><td>١٠ سنوات</td><td id="kwh_10" lang="en" style="direction:ltr;unicode-bidi:embed">—</td><td id="kwd_10" lang="en" style="direction:ltr;unicode-bidi:embed">—</td></tr>
        </table>
        <div class="badge" id="roi_wrap" style="display:none">فترة الاسترداد التقديرية: <span id="payback" style="font-weight:900;margin-inline-start:8px">—</span> سنة</div>
      </div>
    </section>
  </div>
</main>

<script>
  function toLatinDigits(str){
    if(typeof str !== 'string') str = String(str || '');
    const map = {'٠':'0','١':'1','٢':'2','٣':'3','٤':'4','٥':'5','٦':'6','٧':'7','٨':'8','٩':'9',
                 '۰':'0','۱':'1','۲':'2','۳':'3','۴':'4','۵':'5','۶':'6','۷':'7','۸':'8','۹':'9'};
    return str.replace(/[٠-٩۰-۹]/g, d => map[d]).replace(/[,٫]/g,'.').replace(/[^\d.\-]/g,'');
  }
  function numVal(el){ return parseFloat(toLatinDigits(el.value)); }

  const PRICE_PER_KWH_KWD = 0.002;
  const HOURS_PER_YEAR = {
    wash: 300,
    ac: 1800,
    microwave: 80,
    fridge: 3500,
    water_heater: 600,
    tv: 1200,
    other: 1000
  };

  const deviceSel = document.getElementById('device_type');
  const oldI = document.getElementById('old_kwh');
  const newI = document.getElementById('new_kwh');
  const diffI = document.getElementById('price_diff');

  const kwhSave = document.getElementById('kwh_save');
  const kwdSaveY = document.getElementById('kwd_save_y');
  const kwh5 = document.getElementById('kwh_5');
  const kwh10 = document.getElementById('kwh_10');
  const kwd5 = document.getElementById('kwd_5');
  const kwd10 = document.getElementById('kwd_10');

  const roiWrap = document.getElementById('roi_wrap');
  const paybackEl = document.getElementById('payback');

  function format(n){ return new Intl.NumberFormat('en-US', { maximumFractionDigits: 2 }).format(n); }

  document.getElementById('calc').addEventListener('click', () => {
    const oldK = numVal(oldI), newK = numVal(newI);
    if(!oldK || !newK || oldK <= 0 || newK < 0){ alert('يرجى إدخال قيم صحيحة لقدرة الجهاز القديم والجديد (kW).'); return; }
    const priceDiff = numVal(diffI) || 0;
    const hours = HOURS_PER_YEAR[deviceSel?.value] || HOURS_PER_YEAR.other;

    const saveKwhYear = Math.max(0, (oldK - newK) * hours);
    const saveKwdYear = saveKwhYear * PRICE_PER_KWH_KWD;

    kwhSave.textContent = format(saveKwhYear);
    kwdSaveY.textContent = format(saveKwdYear);

    const kwh5v = saveKwhYear * 5, kwh10v = saveKwhYear * 10;
    const kwd5v = saveKwdYear * 5, kwd10v = saveKwdYear * 10;

    kwh5.textContent = format(kwh5v);
    kwh10.textContent = format(kwh10v);
    kwd5.textContent = format(kwd5v);
    kwd10.textContent = format(kwd10v);

    if(saveKwdYear > 0 && priceDiff > 0){
      const years = priceDiff / saveKwdYear;
      paybackEl.textContent = format(years);
      roiWrap.style.display = 'inline-flex';
    } else {
      roiWrap.style.display = 'none';
    }
  });

  document.getElementById('reset').addEventListener('click', () => {
    oldI.value=''; newI.value=''; diffI.value='';
    kwhSave.textContent='—'; kwdSaveY.textContent='—';
    kwh5.textContent='—'; kwh10.textContent='—';
    kwd5.textContent='—'; kwd10.textContent='—';
    roiWrap.style.display='none';
  });
</script>

  <footer>كل مبنى له بصمة طاقة، وخطوتنا تبدأ من كفاءته</footer>
</body>
</html>
